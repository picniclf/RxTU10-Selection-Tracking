<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>RxTU10</title>
<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700;800&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged }
    from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
import { getFirestore, doc, getDoc, setDoc, updateDoc, onSnapshot,
         collection, getDocs, increment, serverTimestamp, arrayUnion }
    from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = {
    apiKey: "AIzaSyAlmHZZ3JixrQlH7PyMa_QqQuDPEN4RJBE",
    authDomain: "rxtu10dashboard.firebaseapp.com",
    projectId: "rxtu10dashboard",
    storageBucket: "rxtu10dashboard.firebasestorage.app",
    messagingSenderId: "485847555600",
    appId: "1:485847555600:web:1ee57ea6044c687b10b495",
    measurementId: "G-RPJ8V0XM19"
};

const app  = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db   = getFirestore(app);
const provider = new GoogleAuthProvider();

const RARITY = {
    common:    { color:"#64748b", bg:"#f1f5f9", label:"COMMON",    glow:"#94a3b8" },
    rare:      { color:"#3b82f6", bg:"#eff6ff", label:"RARE",      glow:"#60a5fa" },
    epic:      { color:"#a855f7", bg:"#faf5ff", label:"EPIC",      glow:"#c084fc" },
    legendary: { color:"#f59e0b", bg:"#fffbeb", label:"LEGENDARY", glow:"#fbbf24" },
};

const PETS = [
    { id:"cat",       emoji:"üê±", name:"‡∏ô‡πâ‡∏≠‡∏á‡πÅ‡∏°‡∏ß",     rarity:"common",    effect:"none",       desc:"‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏ã‡∏µ‡πâ‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å",                        rate:0.20 },
    { id:"rabbit",    emoji:"üê∞", name:"‡∏Å‡∏£‡∏∞‡∏ï‡πà‡∏≤‡∏¢",    rarity:"common",    effect:"none",       desc:"‡∏Ç‡∏ô‡∏ü‡∏π ‡∏ô‡∏¥‡∏™‡∏±‡∏¢‡∏î‡∏µ",                           rate:0.15 },
    { id:"hamster",   emoji:"üêπ", name:"‡πÅ‡∏Æ‡∏°‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå",  rarity:"common",    effect:"none",       desc:"‡∏ß‡∏¥‡πà‡∏á‡∏•‡πâ‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô",                         rate:0.15 },
    { id:"fox",       emoji:"ü¶ä", name:"‡∏à‡∏¥‡πâ‡∏á‡∏à‡∏≠‡∏Å",    rarity:"rare",      effect:"coin+10",    desc:"+10% ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏à‡∏≤‡∏Å‡πÄ‡∏Å‡∏°",                      rate:0.12 },
    { id:"owl",       emoji:"ü¶â", name:"‡∏ô‡∏Å‡∏Æ‡∏π‡∏Å",      rarity:"rare",      effect:"coin+15",    desc:"+15% ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏à‡∏≤‡∏Å‡πÄ‡∏Å‡∏°",                      rate:0.10 },
    { id:"panda",     emoji:"üêº", name:"‡πÅ‡∏û‡∏ô‡∏î‡πâ‡∏≤",     rarity:"rare",      effect:"score+5",    desc:"+5 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠ Quiz",                    rate:0.08 },
    { id:"dragon",    emoji:"üê≤", name:"‡∏°‡∏±‡∏á‡∏Å‡∏£‡∏ô‡πâ‡∏≠‡∏¢",  rarity:"epic",      effect:"coinx2",     desc:"‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç x2 ‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡πÄ‡∏Å‡∏°",                    rate:0.06 },
    { id:"unicorn",   emoji:"ü¶Ñ", name:"‡∏¢‡∏π‡∏ô‡∏¥‡∏Ñ‡∏≠‡∏£‡πå‡∏ô",  rarity:"epic",      effect:"scorex2",    desc:"‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô Quiz x2",                          rate:0.05 },
    { id:"phoenix",   emoji:"ü¶Ö", name:"‡∏ü‡∏µ‡∏ô‡∏¥‡∏Å‡∏ã‡πå",   rarity:"epic",      effect:"daily50",    desc:"+50 ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç daily ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥",             rate:0.04 },
    { id:"kirin",     emoji:"ü¶Å", name:"‡πÑ‡∏Ñ‡∏£‡∏¥‡∏ô",      rarity:"legendary", effect:"gold_name",  desc:"‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏µ‡∏ó‡∏≠‡∏á‡∏ß‡∏¥‡∏ö‡∏ß‡∏±‡∏ö",                        rate:0.02 },
    { id:"bahamut",   emoji:"üêâ", name:"‡∏û‡∏≤‡∏Æ‡∏≤‡∏°‡∏∏‡∏ó",    rarity:"legendary", effect:"all",        desc:"‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏çx3 + ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ôx2 + ‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏∏‡πâ‡∏á",         rate:0.02 },
    { id:"celestial", emoji:"üåü", name:"‡πÄ‡∏ã‡πÄ‡∏•‡∏™‡πÄ‡∏ä‡∏µ‡∏¢‡∏•", rarity:"legendary", effect:"rainbow",    desc:"‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏∏‡πâ‡∏á + daily 100 ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç",            rate:0.01 },
];

const EGG_COST = 100;
let currentUser = null, userData = null, unsub = null;

// ‚îÄ‚îÄ AUTH ‚îÄ‚îÄ
window.loginGoogle = async () => {
    try {
        provider.setCustomParameters({ prompt:'select_account' });
        const r = await signInWithPopup(auth, provider);
        await ensureDoc(r.user);
    } catch(e) { if (e.code !== 'auth/popup-closed-by-user') toast("Login ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à","error"); }
};
window.logoutUser = async () => { await signOut(auth); currentUser=userData=null; renderAll(); };

async function ensureDoc(u) {
    const ref = doc(db,"users",u.uid);
    const snap = await getDoc(ref);
    if (!snap.exists()) {
        await setDoc(ref,{ uid:u.uid, name:u.displayName, email:u.email, googlePhoto:u.photoURL,
            customPhoto:null, coins:200, pets:[], activePet:null,
            studentId:null, nickname:null, realName:null, track:null,
            quizHigh:0, lastDaily:null, petLastDaily:null, createdAt:serverTimestamp() });
    }
}

onAuthStateChanged(auth, async u => {
    currentUser = u;
    if (u) {
        await ensureDoc(u);
        if (unsub) unsub();
        unsub = onSnapshot(doc(db,"users",u.uid), snap => { userData=snap.data(); renderAll(); checkDaily(); });
    } else { renderAll(); }
});

// ‚îÄ‚îÄ DAILY ‚îÄ‚îÄ
async function checkDaily() {
    if (!currentUser||!userData) return;
    const last = userData.lastDaily?.toDate?.();
    const now = new Date();
    const btn = document.getElementById('daily-btn');
    if (btn) btn.classList.toggle('ready', !last||(now-last)>23*3600000);
    const pet = activePet();
    if (pet?.effect==='daily50'||pet?.effect==='all'||pet?.effect==='rainbow') {
        const pl = userData.petLastDaily?.toDate?.();
        if (!pl||(now-pl)>23*3600000) {
            const b = pet.effect==='all'?100:pet.effect==='rainbow'?100:50;
            await updateDoc(doc(db,"users",currentUser.uid),{coins:increment(b),petLastDaily:serverTimestamp()});
            toast(`${pet.emoji} ${pet.name} ‡πÉ‡∏´‡πâ daily +${b} ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç!`,"success");
        }
    }
}
window.claimDaily = async () => {
    if (!currentUser) return;
    const btn = document.getElementById('daily-btn');
    if (!btn?.classList.contains('ready')) { toast("‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ!","info"); return; }
    const pet = activePet(); let base=30;
    if (pet?.effect==='coin+10') base=33;
    if (pet?.effect==='coin+15') base=35;
    if (pet?.effect==='coinx2'||pet?.effect==='all') base=60;
    await updateDoc(doc(db,"users",currentUser.uid),{coins:increment(base),lastDaily:serverTimestamp()});
    btn.classList.remove('ready');
    toast(`üéÅ ‡∏£‡∏±‡∏ö Daily +${base} ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç!`,"success");
    confetti({particleCount:80,spread:60,origin:{y:0.6}});
};

// ‚îÄ‚îÄ HELPERS ‚îÄ‚îÄ
function activePet() {
    if (!userData?.activePet||!userData?.pets) return null;
    return userData.pets.find(p=>p.id===userData.activePet)||null;
}
function coinMulti() {
    const p=activePet(); if(!p) return 1;
    if(p.effect==='coin+10') return 1.1;
    if(p.effect==='coin+15') return 1.15;
    if(p.effect==='coinx2') return 2;
    if(p.effect==='all') return 3;
    return 1;
}
function scoreMulti() { const p=activePet(); return (p?.effect==='scorex2'||p?.effect==='all')?2:1; }
function scoreBonus() { return activePet()?.effect==='score+5'?5:0; }
window.awardCoins = async (base) => {
    if (!currentUser) return base;
    const final = Math.floor(base*coinMulti());
    await updateDoc(doc(db,"users",currentUser.uid),{coins:increment(final)});
    if (final!==base) toast(`${activePet().emoji} Effect! +${final} ‡πÅ‡∏ó‡∏ô +${base}`,"success");
    return final;
};

// ‚îÄ‚îÄ LINK ‚îÄ‚îÄ
window.openLinkModal = () => {
    if (!currentUser) { toast("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤ Login ‡∏Å‡πà‡∏≠‡∏ô","error"); return; }
    document.getElementById('link-input').value='';
    document.getElementById('link-error').textContent='';
    document.getElementById('link-preview').style.display='none';
    document.getElementById('link-modal').classList.add('active');
};
window.closeLinkModal = () => document.getElementById('link-modal').classList.remove('active');
window.previewLink = () => {
    const val=document.getElementById('link-input').value.trim();
    const found=window.__students?.find(s=>s.id===val);
    const err=document.getElementById('link-error');
    const prev=document.getElementById('link-preview');
    if (!found) { err.textContent='‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏µ‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö'; prev.style.display='none'; return; }
    err.textContent='';
    document.getElementById('lp-nick').textContent=found.nickname;
    document.getElementById('lp-name').textContent=found.realName;
    const tb=document.getElementById('lp-track');
    tb.textContent=found.track.toUpperCase();
    tb.style.background=found.track==='sci'?'var(--sci)':'var(--care)';
    prev.style.display='block'; prev.dataset.sid=val;
};
window.confirmLink = async () => {
    const prev=document.getElementById('link-preview');
    if (prev.style.display==='none') { toast("‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏Å‡πà‡∏≠‡∏ô","error"); return; }
    const sid=prev.dataset.sid;
    const found=window.__students?.find(s=>s.id===sid);
    if (!found||!currentUser) return;
    const all=await getDocs(collection(db,"users"));
    let claimed=false;
    all.forEach(d=>{ if(d.data().studentId===sid&&d.id!==currentUser.uid) claimed=true; });
    if (claimed) { toast("‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ admin","error"); return; }
    await updateDoc(doc(db,"users",currentUser.uid),{studentId:sid,nickname:found.nickname,realName:found.realName,track:found.track});
    closeLinkModal();
    toast(`‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö ${found.nickname}!`,"success");
    confetti({particleCount:120,spread:70,origin:{y:0.5}});
};

// ‚îÄ‚îÄ PHOTO UPLOAD ‚îÄ‚îÄ
window.triggerPhoto = () => document.getElementById('photo-input').click();
window.handlePhoto = async (e) => {
    const file=e.target.files[0];
    if (!file||!currentUser) return;
    if (file.size>800*1024) { toast("‡∏£‡∏π‡∏õ‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏ô 800KB","error"); return; }
    toast("‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î...","info");
    const reader=new FileReader();
    reader.onload=ev=>{
        const img=new Image();
        img.onload=async()=>{
            const canvas=document.createElement('canvas');
            const MAX=300; let w=img.width,h=img.height;
            if(w>h){if(w>MAX){h=h*(MAX/w);w=MAX;}}else{if(h>MAX){w=w*(MAX/h);h=MAX;}}
            canvas.width=w; canvas.height=h;
            canvas.getContext('2d').drawImage(img,0,0,w,h);
            const b64=canvas.toDataURL('image/jpeg',0.75);
            await updateDoc(doc(db,"users",currentUser.uid),{customPhoto:b64});
            toast("‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!","success");
        };
        img.src=ev.target.result;
    };
    reader.readAsDataURL(file);
    e.target.value='';
};
function myPhoto() {
    if (!userData) return null;
    return userData.customPhoto||userData.googlePhoto||
        `https://ui-avatars.com/api/?name=${encodeURIComponent(userData.name||'?')}&size=256`;
}

// ‚îÄ‚îÄ GACHA ‚îÄ‚îÄ
function rollPet() {
    const r=Math.random(); let c=0;
    for(const p of PETS){c+=p.rate;if(r<=c)return{...p,instId:Date.now()+Math.random()};}
    return {...PETS[0],instId:Date.now()};
}
window.buyEgg = async () => {
    if (!currentUser||!userData) { toast("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤ Login","error"); return; }
    if (userData.coins<EGG_COST) { toast(`‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡πÑ‡∏°‡πà‡∏û‡∏≠! ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ${EGG_COST}ü™ô`,"error"); return; }
    await updateDoc(doc(db,"users",currentUser.uid),{coins:increment(-EGG_COST)});
    const pet=rollPet();
    await updateDoc(doc(db,"users",currentUser.uid),{pets:arrayUnion({id:pet.id,emoji:pet.emoji,name:pet.name,rarity:pet.rarity,effect:pet.effect,desc:pet.desc,instId:pet.instId})});
    showGachaResult(pet);
};
function showGachaResult(pet) {
    const cfg=RARITY[pet.rarity];
    document.getElementById('gacha-result').innerHTML=`
        <div class="gacha-inner" style="--glow:${cfg.glow}">
            <div class="gr-badge" style="background:${cfg.color}">${cfg.label}</div>
            <div class="gr-emoji">${pet.emoji}</div>
            <div class="gr-name">${pet.name}</div>
            <div class="gr-desc">${pet.desc}</div>
            <div class="gr-btns">
                <button class="btn-gold" onclick="setActive('${pet.id}');closeGacha()">‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏•‡∏¢!</button>
                <button class="btn-gray" onclick="closeGacha()">‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô</button>
            </div>
        </div>`;
    document.getElementById('gacha-modal').classList.add('active');
    const colors=pet.rarity==='legendary'?['#f59e0b','#fbbf24','#fff']:
                 pet.rarity==='epic'?['#a855f7','#c084fc','#fff']:
                 pet.rarity==='rare'?['#3b82f6','#60a5fa','#fff']:['#94a3b8','#cbd5e1'];
    confetti({particleCount:pet.rarity==='legendary'?200:pet.rarity==='epic'?120:60,spread:80,origin:{y:0.5},colors});
}
window.closeGacha = () => document.getElementById('gacha-modal').classList.remove('active');
window.setActive = async (id) => {
    if (!currentUser) return;
    await updateDoc(doc(db,"users",currentUser.uid),{activePet:id});
    toast("‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÅ‡∏•‡πâ‡∏ß!","success");
};
window.unsetActive = async () => {
    if (!currentUser) return;
    await updateDoc(doc(db,"users",currentUser.uid),{activePet:null});
    toast("‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÅ‡∏•‡πâ‡∏ß","info");
};

// ‚îÄ‚îÄ TRADE ‚îÄ‚îÄ
let tradeIdx=null;
window.openTrade=()=>{ if(!currentUser){toast("Login ‡∏Å‡πà‡∏≠‡∏ô","error");return;} tradeIdx=null; renderTradeList(); document.getElementById('trade-panel').classList.add('active'); };
window.closeTrade=()=>document.getElementById('trade-panel').classList.remove('active');
function renderTradeList(){
    const el=document.getElementById('trade-pets');
    if(!userData?.pets?.length){el.innerHTML='<p style="color:#94a3b8;text-align:center;padding:10px">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</p>';return;}
    el.innerHTML=userData.pets.map((p,i)=>{const c=RARITY[p.rarity];return `<div class="trade-item${tradeIdx===i?' sel':''}" onclick="pickTrade(${i})"><span style="font-size:1.5rem">${p.emoji}</span><div><div style="font-weight:600;font-size:0.85rem">${p.name}</div><div style="color:${c.color};font-size:0.7rem;font-weight:700">${c.label}</div></div></div>`;}).join('');
}
window.pickTrade=i=>{tradeIdx=i;renderTradeList();};
window.sendTrade=async()=>{
    const email=document.getElementById('trade-email').value.trim();
    if(!email||tradeIdx===null){toast("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÅ‡∏•‡∏∞‡πÉ‡∏™‡πà email","error");return;}
    const pet=userData.pets[tradeIdx];
    const all=await getDocs(collection(db,"users"));
    let target=null; all.forEach(d=>{if(d.data().email===email)target=d;});
    if(!target){toast("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ","error");return;}
    const newPets=userData.pets.filter((_,i)=>i!==tradeIdx);
    await setDoc(doc(db,"users",currentUser.uid),{pets:newPets},{merge:true});
    await updateDoc(doc(db,"users",target.id),{pets:arrayUnion(pet)});
    toast(`‡∏™‡πà‡∏á ${pet.emoji}${pet.name} ‡πÉ‡∏´‡πâ ${email} ‡πÅ‡∏•‡πâ‡∏ß!`,"success");
    closeTrade(); tradeIdx=null;
};

// ‚îÄ‚îÄ QUIZ ‚îÄ‚îÄ
let qScore=0, qAnswer=null;
window.startQuiz=()=>{
    qScore=0; document.getElementById('q-score').textContent='0';
    document.getElementById('quiz-start').style.display='none';
    document.getElementById('quiz-play').style.display='block';
    nextQ();
};
window.nextQ=()=>{
    const s=window.__students; if(!s?.length) return;
    const st=s[Math.floor(Math.random()*s.length)];
    qAnswer=st.realName;
    document.getElementById('q-nick').textContent=st.nickname.split(' ')[0];
    let opts=[qAnswer];
    while(opts.length<4){const w=s[Math.floor(Math.random()*s.length)].realName;if(!opts.includes(w))opts.push(w);}
    opts.sort(()=>Math.random()-0.5);
    document.getElementById('q-opts').innerHTML=opts.map(o=>`<button class="q-btn" onclick="answerQ(this,'${o.replace(/'/g,"\\'")}')">${o}</button>`).join('');
};
window.answerQ=async(btn,ans)=>{
    document.querySelectorAll('.q-btn').forEach(b=>{
        b.disabled=true;
        if(b.textContent===ans)b.classList.add(ans===qAnswer?'correct':'wrong');
        if(b.textContent===qAnswer)b.classList.add('correct');
    });
    if(ans===qAnswer){
        qScore++;
        document.getElementById('q-score').textContent=qScore*scoreMulti()+scoreBonus();
        await window.awardCoins(5);
        confetti({particleCount:30,spread:50,origin:{y:0.7},colors:['#10b981']});
        setTimeout(nextQ,700);
    } else {
        if(currentUser&&qScore>(userData?.quizHigh||0))
            await updateDoc(doc(db,"users",currentUser.uid),{quizHigh:qScore});
        setTimeout(()=>{
            document.getElementById('quiz-start').style.display='block';
            document.getElementById('quiz-play').style.display='none';
            document.getElementById('q-msg').innerHTML=`‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á‡∏Ñ‡∏∑‡∏≠ <b>${qAnswer}</b> | ‡πÑ‡∏Æ‡∏™‡∏Å‡∏≠‡∏£‡πå: ${Math.max(qScore,userData?.quizHigh||0)}`;
        },1000);
    }
};

// ‚îÄ‚îÄ RENDER ENGINE ‚îÄ‚îÄ
window.renderAll=()=>{ renderTopBar(); renderTab(window.__tab||'home'); };

function renderTopBar() {
    const nav=document.getElementById('top-bar');
    if (!currentUser) {
        nav.innerHTML=`<div class="tb-brand">üíä RxTU10</div>
            <button class="btn-google" onclick="loginGoogle()">
                <svg width="16" height="16" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>
                ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
            </button>`;
        return;
    }
    const pet=activePet();
    const linked=userData?.studentId;
    const dn=linked?(userData.nickname?.split(' ')[0]||userData.name):userData?.name||'...';
    const nc=(pet?.effect==='gold_name'||pet?.effect==='all')?'gold-name':(pet?.effect==='rainbow'?'rainbow-name':'');
    nav.innerHTML=`
        <div class="tb-left" onclick="switchTab('home')">
            <img src="${myPhoto()}" class="tb-avatar" onerror="this.src='https://ui-avatars.com/api/?name=?'">
            <span class="tb-name ${nc}">${dn}${pet?' '+pet.emoji:''}</span>
        </div>
        <div class="tb-right">
            <div class="coin-pill" onclick="switchTab('shop')">ü™ô<span id="coin-count">${(userData?.coins||0).toLocaleString()}</span></div>
            <button id="daily-btn" class="btn-daily" onclick="claimDaily()" title="Daily reward">üéÅ</button>
            <button class="btn-out" onclick="logoutUser()">‡∏≠‡∏≠‡∏Å</button>
        </div>`;
    checkDaily();
}

window.switchTab=(tab)=>{
    window.__tab=tab;
    document.querySelectorAll('.bn-item').forEach(el=>el.classList.toggle('active',el.dataset.tab===tab));
    renderTab(tab);
    window.scrollTo({top:0,behavior:'smooth'});
};

function renderTab(tab) {
    const main=document.getElementById('main-content');
    if(tab==='home')    {main.innerHTML=buildHome();}
    if(tab==='members') {main.innerHTML=buildMembers();}
    if(tab==='play')    {main.innerHTML=buildPlay(); setTimeout(nextDrug,50);}
    if(tab==='shop')    {main.innerHTML=buildShop();}
}

// ‚îÄ‚îÄ HOME TAB ‚îÄ‚îÄ
function buildHome() {
    if (!currentUser) return `<div class="login-card">
        <div style="font-size:4rem;margin-bottom:16px">üíä</div>
        <div style="font-size:1.6rem;font-weight:800;margin-bottom:6px">RxTU10</div>
        <div style="color:var(--muted);margin-bottom:24px;font-size:0.95rem">Class Dashboard ‚Äî Rx 2565</div>
        <button class="btn-google big" onclick="loginGoogle()">
            <svg width="20" height="20" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>
            Login ‡∏î‡πâ‡∏ß‡∏¢ Google
        </button>
        <p style="font-size:0.78rem;color:var(--muted);margin-top:14px">Login ‡πÅ‡∏•‡πâ‡∏ß‡∏ú‡∏π‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏ó‡∏∏‡∏Å‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå</p>
    </div>`;

    const pet=activePet(); const linked=userData?.studentId;
    const tc=userData?.track==='sci'?'var(--sci)':'var(--care)';
    const nc=(pet?.effect==='gold_name'||pet?.effect==='all')?'gold-name':(pet?.effect==='rainbow'?'rainbow-name':'');

    const profileBlock = linked ? `
        <div class="profile-card">
            <div class="pc-img-wrap">
                <img src="${myPhoto()}" class="pc-img" onerror="this.onerror=null;this.src='https://ui-avatars.com/api/?name=?'">
                <button class="pc-cam" onclick="triggerPhoto()" title="‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏π‡∏õ">üì∑</button>
            </div>
            <div class="pc-info">
                <div class="pc-nick ${nc}">${userData.nickname}${pet?' '+pet.emoji:''}</div>
                <div class="pc-real">${userData.realName}</div>
                <div class="pc-id">${userData.studentId}</div>
                <span class="track-badge" style="background:${tc}">${userData.track?.toUpperCase()}</span>
            </div>
        </div>
        <div class="stats-row">
            <div class="stat-box"><div class="sb-icon">ü™ô</div><b>${(userData.coins||0).toLocaleString()}</b><small>‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç</small></div>
            <div class="stat-box"><div class="sb-icon">üèÜ</div><b>${userData.quizHigh||0}</b><small>‡πÑ‡∏Æ‡∏™‡∏Å‡∏≠‡∏£‡πå</small></div>
            <div class="stat-box"><div class="sb-icon">üêæ</div><b>${userData.pets?.length||0}</b><small>‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</small></div>
        </div>` :
        `<div class="unlinked-card">
            <div class="ul-left">
                <img src="${myPhoto()}" class="ul-img" onerror="this.onerror=null;this.src='https://ui-avatars.com/api/?name=?'">
                <div>
                    <div style="font-weight:700">${userData?.name||''}</div>
                    <div style="font-size:0.8rem;color:var(--muted)">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ú‡∏π‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</div>
                </div>
            </div>
            <button class="btn-link" onclick="openLinkModal()">üîó ‡∏ú‡∏π‡∏Å‡∏£‡∏´‡∏±‡∏™</button>
        </div>`;

    const pets = userData?.pets||[];
    const invBlock = pets.length===0 ?
        `<div class="inv-empty">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á ‚Äî ‡πÑ‡∏õ‡∏ó‡∏µ‡πà üõí Shop ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ü‡∏±‡∏Å‡πÑ‡∏Ç‡πà!</div>` :
        `<div class="inv-grid">${pets.map(p=>{
            const cfg=RARITY[p.rarity]; const on=p.id===userData?.activePet;
            return `<div class="inv-item${on?' on':''}" style="--rc:${cfg.color};--rb:${cfg.bg}" onclick="setActive('${p.id}')">
                <div class="inv-em">${p.emoji}</div>
                <div class="inv-nm">${p.name}</div>
                <div style="font-size:0.58rem;color:${cfg.color};font-weight:700">${cfg.label}</div>
                ${on?'<div class="inv-on">ON</div>':''}
            </div>`;
        }).join('')}</div>
        <div style="display:flex;gap:8px;justify-content:center;margin-top:10px">
            ${userData?.activePet?`<button class="btn-gray small" onclick="unsetActive()">‡πÄ‡∏≠‡∏≤‡∏≠‡∏≠‡∏Å</button>`:''}
            ${pets.length?`<button class="btn-gray small" onclick="openTrade()">üîÑ Trade</button>`:''}
        </div>`;

    return `${profileBlock}
        <input type="file" id="photo-input" accept="image/*" style="display:none" onchange="handlePhoto(event)">
        <div class="sec-head">üéí Inventory</div>
        <div class="card">${invBlock}</div>`;
}

// ‚îÄ‚îÄ MEMBERS TAB ‚îÄ‚îÄ
let mTrack='all', mSearch='';
function buildMembers() {
    const all=window.__students||[];
    const sci=all.filter(s=>s.track==='sci').length;
    const care=all.filter(s=>s.track==='care').length;
    const tot=all.length;
    return `
        <div class="card" style="margin-bottom:10px">
            <div style="font-weight:700;font-size:1rem;text-align:center;margin-bottom:10px">üíä RxTU10 ‚Äî ${tot} ‡∏Ñ‡∏ô</div>
            <div class="prog-bar-wrap">
                <div class="prog-bar">
                    <div class="pb-sci" style="width:${(sci/tot*100).toFixed(1)}%"></div>
                    <div class="pb-care" style="width:${(care/tot*100).toFixed(1)}%"></div>
                </div>
                <div class="prog-lbls">
                    <span style="color:var(--sci)">Sci ${sci}</span>
                    <span style="color:var(--care)">Care ${care}</span>
                </div>
            </div>
        </div>
        <div class="filter-row">
            <button class="fbtn${mTrack==='all'?' fa':''}" onclick="mFilter('all')">‡∏£‡∏ß‡∏° ${tot}</button>
            <button class="fbtn${mTrack==='sci'?' fs':''}" onclick="mFilter('sci')">Sci ${sci}</button>
            <button class="fbtn${mTrack==='care'?' fc':''}" onclick="mFilter('care')">Care ${care}</button>
        </div>
        <div class="search-box"><input class="srch-inp" id="msearch" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™..." value="${mSearch}" oninput="mSearchFn(this.value)"></div>
        <div id="mgrid">${memberGrid()}</div>`;
}
function memberGrid() {
    let list=window.__students||[];
    if(mTrack!=='all') list=list.filter(s=>s.track===mTrack);
    if(mSearch){const q=mSearch.toLowerCase();list=list.filter(s=>s.nickname.toLowerCase().includes(q)||s.id.includes(q)||s.realName.toLowerCase().includes(q));}
    return `<div class="mgrid">${list.map(s=>{
        const tc=s.track==='sci'?'var(--sci)':'var(--care)';
        const img=`img/${s.id}.jpg`;
        const def=`https://ui-avatars.com/api/?name=${encodeURIComponent(s.nickname.split(' ')[0])}&background=${s.track==='sci'?'2563eb':'10b981'}&color=fff&size=128`;
        return `<div class="mcard" onclick="openProfileModal('${s.id}')">
            <img src="${img}" onerror="this.onerror=null;this.src='${def}'" class="mc-img">
            <div class="mc-nick">${s.nickname}</div>
            <div class="mc-id">${s.id}</div>
            <span class="track-badge small" style="background:${tc}">${s.track.toUpperCase()}</span>
        </div>`;
    }).join('')}</div>`;
}
window.mFilter=t=>{mTrack=t;const g=document.getElementById('mgrid');if(g)g.innerHTML=memberGrid();};
window.mSearchFn=v=>{mSearch=v;const g=document.getElementById('mgrid');if(g)g.innerHTML=memberGrid();};
window.openProfileModal=id=>{
    const s=window.__students?.find(x=>x.id===id);if(!s)return;
    const tc=s.track==='sci'?'var(--sci)':'var(--care)';
    const img=`img/${s.id}.jpg`;
    const def=`https://ui-avatars.com/api/?name=${encodeURIComponent(s.nickname.split(' ')[0])}&background=${s.track==='sci'?'2563eb':'10b981'}&color=fff&size=256`;
    document.getElementById('pm-content').innerHTML=`
        <img src="${img}" onerror="this.onerror=null;this.src='${def}'" class="pm-img">
        <div class="pm-nick">${s.nickname}</div>
        <div class="pm-real">${s.realName}</div>
        <div class="pm-id">${s.id}</div>
        <span class="track-badge" style="background:${tc}">${s.track.toUpperCase()}</span>`;
    document.getElementById('profile-modal').classList.add('active');
};
window.closePM=()=>document.getElementById('profile-modal').classList.remove('active');

// ‚îÄ‚îÄ PLAY TAB ‚îÄ‚îÄ
function buildPlay() {
    return `
        <div class="sec-head">üïµÔ∏è ‡∏ó‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô</div>
        <div class="card">
            <div id="quiz-start">
                <p id="q-msg" style="color:var(--muted);font-size:0.88rem;text-align:center;margin-bottom:14px">‡∏ó‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á ‚Äî ‡πÑ‡∏î‡πâ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏î‡πâ‡∏ß‡∏¢ ü™ô</p>
                <button class="btn-gold full" onclick="startQuiz()">‚ñ∂ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°!</button>
            </div>
            <div id="quiz-play" style="display:none">
                <div style="font-size:0.88rem;color:var(--muted);margin-bottom:8px">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <b id="q-score" style="color:var(--gold);font-size:1.1rem">0</b></div>
                <div class="q-nick" id="q-nick">...</div>
                <div class="q-grid" id="q-opts"></div>
            </div>
        </div>
        <div class="sec-head">üíä ‡∏ó‡∏≤‡∏¢‡∏¢‡∏≤ (50 Drugs)</div>
        <div class="card">
            <div class="flashcard" onclick="flipCard()">
                <div id="fc-front" style="font-size:1.5rem;font-weight:800">???</div>
                <div id="fc-back" style="display:none;font-size:0.95rem;color:var(--care);font-weight:600;margin-top:8px"></div>
                <div id="fc-hint" style="font-size:0.75rem;color:var(--muted);margin-top:10px">‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏â‡∏•‡∏¢</div>
            </div>
            <button class="btn-gray full" style="margin-top:10px" onclick="nextDrug()">‡∏™‡∏∏‡πà‡∏°‡∏¢‡∏≤‡πÉ‡∏´‡∏°‡πà üîÑ</button>
        </div>`;
}

// ‚îÄ‚îÄ SHOP TAB ‚îÄ‚îÄ
function buildShop() {
    const coins=userData?.coins||0;
    const canBuy=!!currentUser&&coins>=EGG_COST;
    return `
        <div class="sec-head">üõí ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</div>
        <div class="card" style="text-align:center">
            <div class="egg-wobble">ü•ö</div>
            <div style="font-size:1.2rem;font-weight:800;margin:8px 0 4px">‡πÑ‡∏Ç‡πà‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤</div>
            <div style="color:var(--muted);font-size:0.85rem;margin-bottom:14px">‡∏™‡∏∏‡πà‡∏°‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏à‡∏≤‡∏Å pool ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
            <div class="rates-wrap">
                <span class="rate-chip" style="background:#f1f5f9;color:#64748b">Common 50%</span>
                <span class="rate-chip" style="background:#eff6ff;color:#3b82f6">Rare 30%</span>
                <span class="rate-chip" style="background:#faf5ff;color:#a855f7">Epic 15%</span>
                <span class="rate-chip" style="background:#fffbeb;color:#f59e0b">Legendary 5%</span>
            </div>
            <button class="btn-gold full" style="margin-top:18px;padding:14px;font-size:1rem" onclick="buyEgg()" ${canBuy?'':'disabled'}>
                ü•ö ‡∏ü‡∏±‡∏Å‡πÑ‡∏Ç‡πà ‚Äî ${EGG_COST} ü™ô
            </button>
            ${!currentUser?'<p style="color:var(--muted);font-size:0.8rem;margin-top:8px">Login ‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡∏ã‡∏∑‡πâ‡∏≠‡πÑ‡∏î‡πâ</p>':
              !canBuy?`<p style="color:#ef4444;font-size:0.8rem;margin-top:8px">‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡πÑ‡∏°‡πà‡∏û‡∏≠ (‡∏°‡∏µ ${coins} / ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ${EGG_COST})</p>`:''}
        </div>
        <div class="sec-head">üêæ ‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô Pool</div>
        <div class="card">
        ${['legendary','epic','rare','common'].map(r=>{
            const list=PETS.filter(p=>p.rarity===r);
            const cfg=RARITY[r];
            return `<div style="margin-bottom:16px">
                <div style="font-weight:700;color:${cfg.color};font-size:0.82rem;margin-bottom:8px">${cfg.label} ‚Äî ${(list.reduce((a,p)=>a+p.rate,0)*100).toFixed(0)}%</div>
                <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(88px,1fr));gap:8px">
                    ${list.map(p=>`<div style="background:${cfg.bg};border-radius:12px;padding:10px 6px;text-align:center;border:1.5px solid ${cfg.color}33">
                        <div style="font-size:1.7rem">${p.emoji}</div>
                        <div style="font-size:0.72rem;font-weight:700;margin-top:4px">${p.name}</div>
                        <div style="font-size:0.62rem;color:var(--muted);margin-top:2px">${p.desc}</div>
                    </div>`).join('')}
                </div>
            </div>`;
        }).join('')}
        </div>`;
}

window.__db=db; window.__auth=auth; window.__ready=true;
</script>

<style>
:root{--sci:#2563eb;--care:#10b981;--gold:#f59e0b;--bg:#f0f4f8;--text:#1e293b;--muted:#64748b;--border:#e2e8f0;--nav:60px;--btm:66px;}
*{box-sizing:border-box;margin:0;padding:0;}
html,body{height:100%;font-family:'Kanit',sans-serif;background:var(--bg);color:var(--text);}

#top-bar{position:fixed;top:0;left:0;right:0;height:var(--nav);background:#fff;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;padding:0 14px;z-index:200;box-shadow:0 2px 8px rgba(0,0,0,.06);gap:8px;}
.tb-brand{font-size:1.2rem;font-weight:800;}
.tb-left{display:flex;align-items:center;gap:8px;cursor:pointer;min-width:0;flex:1;}
.tb-avatar{width:32px;height:32px;border-radius:50%;object-fit:cover;border:2px solid var(--border);flex-shrink:0;}
.tb-name{font-size:0.88rem;font-weight:600;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:130px;}
.tb-right{display:flex;align-items:center;gap:6px;flex-shrink:0;}
.coin-pill{background:linear-gradient(135deg,#fef3c7,#fde68a);border:1px solid #f59e0b;padding:4px 9px;border-radius:20px;font-size:0.8rem;font-weight:700;color:#92400e;cursor:pointer;display:flex;align-items:center;gap:3px;}
.btn-daily{background:none;border:1.5px solid var(--border);padding:4px 8px;border-radius:8px;font-size:0.95rem;cursor:pointer;opacity:.4;transition:.2s;}
.btn-daily.ready{opacity:1;border-color:var(--care);animation:pulse 2s ease infinite;}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.12)}}
.btn-out{background:none;border:1px solid #fca5a5;color:#ef4444;padding:4px 10px;border-radius:8px;font-family:inherit;font-size:0.78rem;cursor:pointer;}
.btn-google{background:#fff;border:1.5px solid var(--border);padding:8px 13px;border-radius:10px;font-family:inherit;font-size:0.85rem;cursor:pointer;display:flex;align-items:center;gap:7px;color:var(--text);font-weight:500;transition:.2s;}
.btn-google.big{padding:13px 24px;font-size:1rem;}

#main-content{padding:calc(var(--nav)+12px) 12px calc(var(--btm)+12px);}

#bottom-nav{position:fixed;bottom:0;left:0;right:0;height:var(--btm);background:#fff;border-top:1px solid var(--border);display:flex;z-index:200;box-shadow:0 -3px 14px rgba(0,0,0,.07);}
.bn-item{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:3px;cursor:pointer;border:none;background:none;font-family:inherit;color:var(--muted);font-size:0.68rem;font-weight:600;transition:.15s;padding:6px 4px;}
.bn-icon{font-size:1.35rem;transition:.15s;}
.bn-item.active{color:var(--gold);}
.bn-item.active .bn-icon{transform:translateY(-2px);}

.card{background:#fff;border-radius:18px;padding:16px;box-shadow:0 2px 8px rgba(0,0,0,.05);margin-bottom:12px;}
.sec-head{font-size:0.75rem;font-weight:700;color:var(--muted);letter-spacing:2px;text-transform:uppercase;text-align:center;margin:18px 0 10px;}
.login-card{background:#fff;border-radius:22px;padding:40px 22px;text-align:center;box-shadow:0 4px 16px rgba(0,0,0,.07);}

/* HOME */
.profile-card{display:flex;align-items:center;gap:14px;background:#fff;border-radius:18px;padding:16px;box-shadow:0 4px 16px rgba(0,0,0,.08);margin-bottom:12px;border:2px solid var(--gold);}
.pc-img-wrap{position:relative;flex-shrink:0;}
.pc-img{width:76px;height:76px;border-radius:50%;object-fit:cover;border:3px solid #fff;box-shadow:0 4px 12px rgba(0,0,0,.12);}
.pc-cam{position:absolute;bottom:-2px;right:-2px;background:#fff;border:2px solid var(--border);border-radius:50%;width:24px;height:24px;font-size:0.7rem;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 5px rgba(0,0,0,.1);}
.pc-nick{font-size:1.15rem;font-weight:800;} .pc-real{font-size:0.82rem;color:var(--muted);} .pc-id{font-size:0.72rem;color:var(--muted);font-family:'Space Mono',monospace;}
.stats-row{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:12px;}
.stat-box{background:#fff;border-radius:14px;padding:12px 6px;text-align:center;box-shadow:0 2px 6px rgba(0,0,0,.04);} .sb-icon{font-size:1.2rem;margin-bottom:2px;} .stat-box b{display:block;font-size:0.95rem;font-weight:700;} .stat-box small{font-size:0.68rem;color:var(--muted);}
.unlinked-card{display:flex;align-items:center;gap:12px;background:#fff;border-radius:18px;padding:14px;box-shadow:0 2px 8px rgba(0,0,0,.05);margin-bottom:12px;border:2px dashed var(--border);}
.ul-left{display:flex;align-items:center;gap:10px;flex:1;} .ul-img{width:42px;height:42px;border-radius:50%;object-fit:cover;border:2px solid var(--border);}
.btn-link{background:linear-gradient(135deg,var(--sci),#1d4ed8);color:#fff;border:none;padding:8px 14px;border-radius:10px;font-family:inherit;font-size:0.82rem;font-weight:600;cursor:pointer;white-space:nowrap;}
.inv-empty{text-align:center;color:var(--muted);font-size:0.85rem;padding:18px;}
.inv-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(74px,1fr));gap:8px;}
.inv-item{background:var(--rb,#f8fafc);border:2px solid transparent;border-radius:12px;padding:9px 5px;text-align:center;cursor:pointer;transition:.2s;position:relative;}
.inv-item:hover{transform:translateY(-2px);border-color:var(--rc);}
.inv-item.on{border-color:var(--rc);box-shadow:0 0 10px color-mix(in srgb,var(--rc) 20%,transparent);}
.inv-em{font-size:1.7rem;} .inv-nm{font-size:0.65rem;font-weight:600;margin-top:3px;}
.inv-on{position:absolute;top:-5px;right:-5px;background:var(--rc);color:#fff;font-size:0.48rem;font-weight:700;padding:2px 5px;border-radius:5px;}

/* MEMBERS */
.filter-row{display:flex;gap:7px;margin-bottom:10px;}
.fbtn{flex:1;padding:8px 4px;border-radius:12px;border:2px solid var(--border);background:#fff;font-family:inherit;font-size:0.8rem;font-weight:600;cursor:pointer;color:var(--muted);transition:.2s;}
.fbtn.fa{border-color:var(--gold);background:#fffbeb;color:#92400e;}
.fbtn.fs{border-color:var(--sci);background:#eff6ff;color:var(--sci);}
.fbtn.fc{border-color:var(--care);background:#ecfdf5;color:var(--care);}
.search-box{margin-bottom:10px;}
.srch-inp{width:100%;padding:11px 14px;border:2px solid #fff;border-radius:13px;font-family:inherit;font-size:0.92rem;background:#fff;box-shadow:0 3px 10px rgba(0,0,0,.07);outline:none;transition:.2s;}
.srch-inp:focus{border-color:var(--gold);}
.mgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(108px,1fr));gap:9px;}
.mcard{background:#fff;border-radius:14px;padding:12px 6px;cursor:pointer;text-align:center;border:1.5px solid var(--border);transition:.2s;display:flex;flex-direction:column;align-items:center;gap:5px;}
.mcard:hover{transform:translateY(-3px);box-shadow:0 5px 14px rgba(0,0,0,.07);}
.mc-img{width:60px;height:60px;border-radius:50%;object-fit:cover;border:3px solid #fff;box-shadow:0 2px 8px rgba(0,0,0,.1);}
.mc-nick{font-weight:600;font-size:0.85rem;} .mc-id{font-size:0.65rem;color:var(--muted);}
.prog-bar-wrap{margin-bottom:4px;}
.prog-bar{height:18px;background:var(--border);border-radius:50px;overflow:hidden;display:flex;margin-bottom:5px;}
.pb-sci{background:var(--sci);height:100%;} .pb-care{background:var(--care);height:100%;}
.prog-lbls{display:flex;justify-content:space-between;font-size:0.8rem;font-weight:600;}

/* PLAY */
.q-nick{font-size:1.4rem;font-weight:800;color:var(--gold);text-align:center;margin-bottom:14px;}
.q-grid{display:grid;grid-template-columns:1fr 1fr;gap:9px;}
.q-btn{background:#f8fafc;border:2px solid var(--border);padding:12px 8px;border-radius:12px;font-family:inherit;font-size:0.85rem;cursor:pointer;transition:.15s;color:var(--text);}
.q-btn:hover:not(:disabled){background:#f1f5f9;}
.q-btn.correct{background:#dcfce7;border-color:#10b981;color:#065f46;}
.q-btn.wrong{background:#fee2e2;border-color:#ef4444;color:#7f1d1d;}
.flashcard{background:#f8fafc;border-radius:14px;padding:26px;min-height:96px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;border:2px dashed var(--border);}

/* SHOP */
.egg-wobble{font-size:4rem;animation:wobble 2.5s ease infinite;display:block;}
@keyframes wobble{0%,100%{transform:rotate(-6deg)}50%{transform:rotate(6deg)}}
.rates-wrap{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;}
.rate-chip{padding:5px 11px;border-radius:18px;font-size:0.76rem;font-weight:700;}

/* MODALS */
.modal-ov{display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:500;align-items:center;justify-content:center;padding:16px;backdrop-filter:blur(4px);}
.modal-ov.active{display:flex;}
.modal-box{background:#fff;border-radius:22px;padding:26px 20px;max-width:350px;width:100%;animation:popIn .35s cubic-bezier(.34,1.56,.64,1);position:relative;max-height:88vh;overflow-y:auto;}
@keyframes popIn{from{transform:scale(.5);opacity:0}to{transform:scale(1);opacity:1}}
.mclose{position:absolute;top:12px;right:12px;background:var(--border);border:none;width:28px;height:28px;border-radius:50%;cursor:pointer;font-size:0.9rem;display:flex;align-items:center;justify-content:center;}
.pm-img{width:86px;height:86px;border-radius:50%;object-fit:cover;border:4px solid #fff;box-shadow:0 4px 14px rgba(0,0,0,.12);margin-bottom:10px;}
.pm-nick{font-size:1.3rem;font-weight:700;} .pm-real{color:var(--muted);font-size:0.9rem;} .pm-id{font-size:0.78rem;color:var(--muted);font-family:'Space Mono',monospace;margin:4px 0;}
.link-irow{display:flex;gap:7px;margin:12px 0 4px;}
.link-inp{flex:1;padding:11px 13px;border:2px solid var(--border);border-radius:11px;font-family:inherit;font-size:0.95rem;outline:none;transition:.2s;}
.link-inp:focus{border-color:var(--sci);}
.link-prev{background:var(--bg);border-radius:13px;padding:13px;margin:7px 0;display:none;}
.gacha-inner{display:flex;flex-direction:column;align-items:center;gap:9px;text-align:center;}
.gr-badge{padding:4px 14px;border-radius:18px;color:#fff;font-size:0.76rem;font-weight:800;letter-spacing:2px;}
.gr-emoji{font-size:5rem;animation:gbounce .6s ease;filter:drop-shadow(0 0 18px var(--glow,#f59e0b));}
@keyframes gbounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-15px)}}
.gr-name{font-size:1.4rem;font-weight:800;} .gr-desc{font-size:0.85rem;color:var(--muted);}
.gr-btns{display:flex;gap:9px;margin-top:7px;}
.slide-panel{position:fixed;bottom:0;left:0;right:0;background:#fff;border-radius:22px 22px 0 0;padding:20px 16px;box-shadow:0 -6px 28px rgba(0,0,0,.1);z-index:400;transform:translateY(100%);transition:transform .35s cubic-bezier(.34,1.56,.64,1);max-height:68vh;overflow-y:auto;}
.slide-panel.active{transform:translateY(0);}
.trade-item{display:flex;align-items:center;gap:9px;padding:9px;border-radius:10px;border:2px solid var(--border);cursor:pointer;margin-bottom:7px;transition:.15s;}
.trade-item.sel{border-color:var(--sci);background:#eff6ff;}
.trade-inp{width:100%;padding:10px 13px;border:2px solid var(--border);border-radius:11px;font-family:inherit;font-size:0.88rem;outline:none;margin:9px 0;}
.trade-inp:focus{border-color:var(--sci);}
.btn-gold{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;border:none;padding:10px 18px;border-radius:11px;font-family:inherit;font-size:0.92rem;font-weight:700;cursor:pointer;transition:.2s;}
.btn-gold:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px rgba(245,158,11,.4);}
.btn-gold:disabled{opacity:.5;cursor:not-allowed;}
.btn-gold.full{width:100%;}
.btn-gray{background:var(--border);color:var(--muted);border:none;padding:9px 16px;border-radius:11px;font-family:inherit;font-size:0.88rem;cursor:pointer;}
.btn-gray.small{padding:6px 11px;font-size:0.78rem;}
.btn-gray.full{width:100%;}
.track-badge{padding:3px 9px;border-radius:6px;color:#fff;font-size:0.6rem;font-weight:700;text-transform:uppercase;}
.track-badge.small{font-size:0.56rem;padding:2px 6px;}
.gold-name{background:linear-gradient(90deg,#f59e0b,#fbbf24,#f59e0b);background-size:200% auto;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:sh 2s linear infinite;}
.rainbow-name{background:linear-gradient(90deg,#f59e0b,#ef4444,#a855f7,#3b82f6,#10b981,#f59e0b);background-size:200% auto;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:sh 1.5s linear infinite;}
@keyframes sh{to{background-position:200% center}}
#toast{position:fixed;bottom:calc(var(--btm)+10px);left:50%;transform:translateX(-50%) translateY(80px);background:#1e293b;color:#fff;padding:10px 16px;border-radius:11px;font-size:0.86rem;font-weight:500;z-index:1000;transition:transform .3s;white-space:nowrap;box-shadow:0 4px 14px rgba(0,0,0,.2);}
#toast.show{transform:translateX(-50%) translateY(0);}
#toast.success{background:#065f46;} #toast.error{background:#7f1d1d;} #toast.info{background:#1e40af;}
@media(max-width:360px){.mgrid{grid-template-columns:repeat(auto-fill,minmax(95px,1fr))}}
</style>
</head>
<body>

<div id="top-bar">
    <div class="tb-brand">üíä RxTU10</div>
    <button class="btn-google" onclick="loginGoogle()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
</div>

<div id="main-content">
    <div style="text-align:center;padding:60px 20px;color:var(--muted)">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
</div>

<nav id="bottom-nav">
    <button class="bn-item active" data-tab="home" onclick="switchTab('home')"><span class="bn-icon">üè†</span>Home</button>
    <button class="bn-item" data-tab="members" onclick="switchTab('members')"><span class="bn-icon">üë•</span>Members</button>
    <button class="bn-item" data-tab="play" onclick="switchTab('play')"><span class="bn-icon">üéÆ</span>Play</button>
    <button class="bn-item" data-tab="shop" onclick="switchTab('shop')"><span class="bn-icon">üõí</span>Shop</button>
</nav>

<!-- PROFILE MODAL -->
<div class="modal-ov" id="profile-modal" onclick="if(event.target===this)closePM()">
    <div class="modal-box" style="text-align:center">
        <button class="mclose" onclick="closePM()">‚úï</button>
        <div id="pm-content"></div>
    </div>
</div>

<!-- LINK MODAL -->
<div class="modal-ov" id="link-modal" onclick="if(event.target===this)closeLinkModal()">
    <div class="modal-box">
        <button class="mclose" onclick="closeLinkModal()">‚úï</button>
        <div style="font-size:1.25rem;font-weight:800;margin-bottom:4px">üîó ‡∏ú‡∏π‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</div>
        <div style="font-size:0.82rem;color:var(--muted)">‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™ 10 ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</div>
        <div class="link-irow">
            <input type="text" class="link-inp" id="link-input" placeholder="‡πÄ‡∏ä‡πà‡∏ô 6518610016" maxlength="10"
                   oninput="this.value=this.value.replace(/[^0-9]/g,'')"
                   onkeyup="if(this.value.length===10)previewLink()">
            <button class="btn-gold" onclick="previewLink()">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</button>
        </div>
        <div id="link-error" style="color:#ef4444;font-size:0.8rem;min-height:16px;margin-bottom:2px"></div>
        <div class="link-prev" id="link-preview">
            <div style="display:flex;align-items:center;gap:10px">
                <div style="font-size:2rem">üë§</div>
                <div>
                    <div style="font-weight:700;font-size:1.05rem" id="lp-nick"></div>
                    <div style="font-size:0.82rem;color:var(--muted)" id="lp-name"></div>
                    <span class="track-badge" id="lp-track" style="margin-top:4px;display:inline-block"></span>
                </div>
            </div>
            <div style="font-size:0.78rem;color:var(--muted);margin-top:8px">‡πÉ‡∏ä‡πà‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏´‡∏°?</div>
        </div>
        <div style="display:flex;gap:8px;margin-top:12px">
            <button class="btn-gold" style="flex:1" onclick="confirmLink()">‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
            <button class="btn-gray" style="flex:1" onclick="closeLinkModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        </div>
    </div>
</div>

<!-- GACHA MODAL -->
<div class="modal-ov" id="gacha-modal" onclick="if(event.target===this)closeGacha()">
    <div class="modal-box"><div id="gacha-result"></div></div>
</div>

<!-- TRADE PANEL -->
<div class="slide-panel" id="trade-panel">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <span style="font-weight:700">üîÑ Trade ‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</span>
        <button class="mclose" style="position:static" onclick="closeTrade()">‚úï</button>
    </div>
    <p style="font-size:0.82rem;color:var(--muted);margin-bottom:9px">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡∏™‡πà‡∏á:</p>
    <div id="trade-pets"></div>
    <input type="email" class="trade-inp" id="trade-email" placeholder="Email ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ">
    <button class="btn-gold full" onclick="sendTrade()">‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô ‚úâÔ∏è</button>
</div>

<div id="toast"></div>

<script>
// ‚îÄ‚îÄ STUDENTS ‚îÄ‚îÄ
const R_SCI=["‡∏Å‡∏¥‡πâ‡∏ü‡∏ó‡πå üéÅ (6418610082)","‡πÇ‡∏ö üéÄ (6418610140)","‡∏≠‡∏¥‡∏Å‡∏Ñ‡∏¥‡∏ß üë¶ (6418610264)","‡πÄ‡∏´‡∏ô‡∏∑‡∏≠ ‚õ∞Ô∏è (6418610280)","‡∏Ç‡∏¥‡∏° üéº (6518540015)","‡∏°‡∏≤‡∏¢‡∏î‡πå üíñ (6518610016)","‡∏ï‡∏¥‡∏ô üíé (6518610024)","‡∏≠‡πâ‡∏ô üêøÔ∏è (6518610073)","‡πÄ‡∏≠‡πá‡∏°‡∏°‡∏µ‡πà üå∏ (6518610099)","‡πÇ‡∏ü‡∏Å‡∏±‡∏™ üîç (6518610123)","‡∏•‡∏¥‡πâ‡∏á üîó (6518610164)","‡∏ï‡∏¥‡∏ì‡∏ì‡πå ‚ú® (6518610172)","‡πÄ‡∏û‡πà‡∏¢‡πÄ‡∏û‡πà‡∏¢ üèÆ (6518610180)","‡∏õ‡πà‡∏≤‡∏ô üåø (6518610198)","‡πÄ‡∏≠‡πÄ‡∏ä‡∏µ‡∏¢ üåè (6518610214)","‡πÅ‡∏û‡∏£ üëó (6518610222)","‡∏Å‡∏≤‡∏ü‡∏¥‡∏ß üê± (6518610297)","‡πÅ‡∏ï‡∏á‡πÇ‡∏° üçâ (6518610347)","‡∏™‡πâ‡∏°‡πÇ‡∏≠ üçä (6518610420)","‡∏≠‡∏∏‡πâ‡∏° ü§ó (6518610446)","‡∏ó‡∏¥‡∏ß üå≤ (6518610479)","‡πÅ‡∏û‡∏ô üêº (6518610503)","‡∏õ‡∏±‡πâ‡∏ô üè∫ (6518610545)","‡πÅ‡∏Å‡πä‡∏õ üß¢ (6518610560)","‡πÅ‡∏¢‡∏° üçì (6518610578)","‡πÅ‡∏û‡∏£‡πÑ‡∏´‡∏° üßµ (6518610586)","‡πÑ‡∏≠‡∏à‡∏±‡∏á üç¶ (6518610610)","‡πÄ‡∏û‡πâ‡∏ô‡∏ó‡πå üé® (6518670010)","‡∏™‡∏∏‡πà‡∏ô üß∂ (6518670069)","‡∏ó‡∏∞‡πÄ‡∏• üåä (6518670077)","‡∏ï‡∏±‡πâ‡∏ß üéüÔ∏è (6518670093)","‡πÅ‡∏û‡∏£‡∏ß‡∏≤ üíé (6518670101)","‡∏ã‡∏≤‡πÄ‡∏ô‡∏µ‡∏¢‡∏£‡πå üéê (6518670119)","‡πÄ‡∏õ‡∏õ‡πÄ‡∏õ‡∏≠‡∏£‡πå üå∂Ô∏è (6518670150)","‡∏ß‡πà‡∏≤‡∏ô‡∏ß‡πà‡∏≤‡∏ô üçÉ (6518670176)","‡∏ü‡πâ‡∏≤‡πÉ‡∏™ ‚òÄÔ∏è (6518670192)","‡πÄ‡∏Ç‡∏ï üèÅ (6518670200)","‡πÄ‡∏ö‡πÄ‡∏ö‡πâ üß∏ (6518670226)","‡πÄ‡∏ä‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà üçí (6518670267)"];
const R_CARE=["‡πÄ‡∏°‡∏¢‡πå üåô (6418610157)","‡πÄ‡∏î‡∏µ‡∏¢‡∏£ ü¶å (6418670110)","‡∏ö‡∏±‡∏ß ü™∑ (6518610032)","‡∏õ‡∏≤‡∏•‡πå‡∏°‡∏°‡∏µ‡πà üå¥ (6518610040)","‡∏≠‡∏∏‡πã‡∏á‡∏≠‡∏¥‡πã‡∏á ü¶≠ (6518610057)","‡πÄ‡∏û‡∏µ‡∏¢‡∏ß ü´ß (6518610065)","‡πÉ‡∏ö‡∏ö‡∏±‡∏ß üçÉ (6518610081)","‡∏ö‡∏•‡∏π üíô (6518610107)","‡∏ï‡πâ‡∏ô‡∏ô‡πâ‡∏≥ üå± (6518610115)","‡πÅ‡∏ã‡∏ô‡∏ô‡∏µ‡πà ‚òÄÔ∏è (6518610131)","‡∏Å‡∏±‡∏™ ‚õΩ (6518610149)","‡∏ô‡∏¥‡∏ô‡∏à‡∏µ‡πâ ü•∑ (6518610206)","‡∏ô‡∏ô‡∏ó‡πå üï∂Ô∏è (6518610230)","‡∏°‡∏¥‡∏ô‡∏ó‡πå üåø (6518610248)","‡πÅ‡∏õ‡πâ‡∏á üçû (6518610255)","‡∏ï‡∏µ‡∏ï‡∏µ‡πâ üé∏ (6518610263)","‡πÅ‡∏û‡∏° üëí (6518610271)","‡∏≠‡∏∞‡∏ï‡∏≠‡∏° ‚öõÔ∏è (6518610305)","‡∏ô‡∏≤‡∏¢ üëî (6518610313)","‡∏Å‡∏≤‡∏£‡πå‡∏ï‡∏π‡∏ô üìñ (6518610321)","‡∏ô‡∏±‡∏ã üå† (6518610354)","‡πÅ‡∏û‡∏ô‡∏î‡πâ‡∏≤ üêº (6518610362)","‡∏õ‡∏¥‡πä‡∏Å üé∏ (6518610388)","‡∏à‡∏≠‡∏¢ üòä (6518610396)","‡∏°‡∏≤‡∏¢‡∏î‡πå ‚ú® (6518610404)","‡πÇ‡∏î‡∏ô‡∏±‡∏ó üç© (6518610453)","‡∏ö‡∏∏‡πä‡∏Ñ üìö (6518610461)","‡∏õ‡∏≠‡∏ô‡∏î‡πå üí∑ (6518610495)","‡πÄ‡∏ö‡∏Ñ ü•ì (6518610511)","‡∏ï‡πâ‡∏ô‡∏Å‡∏•‡πâ‡∏≤ ü™¥ (6518610537)","‡∏°‡∏¥‡πâ‡∏ô‡∏ó‡πå üå± (6518610552)","‡∏ï‡πâ‡∏ô‡∏ô‡πâ‡∏≥ üíß (6518610602)","‡πÅ‡∏û‡∏£‡∏ó‡∏≠‡∏á ‚ú® (6518660011)","‡πÅ‡∏Å‡πâ‡∏° üòä (6518660029)","‡πÅ‡∏™‡∏ô‡∏î‡∏µ üòá (6518670028)","‡∏≠‡∏∏‡πä‡∏Å‡∏≠‡∏¥‡πä‡∏Å üê£ (6518670044)","‡∏ï‡πâ‡πâ‡∏ô‡∏ô‡πâ‡∏≥ üåä (6518670085)","‡πÄ‡∏à üÉè (6518670135)","‡πÄ‡∏õ‡∏°‡∏µ‡πà üç≠ (6518670143)","‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤ ‚òÅÔ∏è (6518670184)","‡∏û‡∏µ‡∏ä üçë (6518670218)","‡∏™‡∏°‡∏≤‡∏¢‡∏î‡πå üòÅ (6518670242)","‡πÅ‡∏û‡∏£ üå∏ (6518670259)","‡∏ï‡∏∞‡∏ß‡∏±‡∏ô üåª (6518670283)"];
const RN="‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ä‡∏ç‡∏≤‡∏ô‡∏¥‡∏® ‡∏ä‡∏≤‡∏¢‡πÄ‡∏°‡∏Ü‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ì‡∏±‡∏ä‡∏ä‡∏≤ ‡∏®‡∏£‡∏µ‡∏ó‡∏≠‡∏á‡∏™‡∏∏‡∏Ç‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ì‡∏±‡∏è‡∏ê‡∏ì‡∏¥‡∏ä‡∏≤ ‡∏ï‡∏£‡∏≤‡∏´‡∏¢‡∏Å‡∏ô‡∏≤‡∏¢‡∏õ‡∏ß‡∏£‡∏¥‡∏® ‡∏ä‡∏π‡∏ä‡∏°‡∏ä‡∏∑‡πà‡∏ô‡∏ô‡∏≤‡∏¢‡∏û‡∏®‡∏ß‡∏±‡∏ï ‡∏û‡∏∏‡∏ó‡∏ò‡∏¥‡∏ä‡∏ô‡∏°‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ì‡∏±‡∏é‡∏ê‡∏£‡∏¥‡∏ì‡∏µ‡∏¢‡πå ‡πÄ‡∏ó‡∏∑‡∏≠‡∏Å‡∏ó‡πâ‡∏≤‡∏ß‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏´‡∏£‡∏£‡∏©‡∏ò‡∏£ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏†‡∏±‡∏Å‡∏î‡∏µ‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏Å‡∏ä‡∏Å‡∏£ ‡∏ó‡∏£‡∏á‡πÄ‡∏ï‡∏ä‡∏∞‡πÄ‡∏•‡∏¥‡∏®‡∏ô‡∏≤‡∏¢‡∏Å‡∏é‡∏õ‡∏¥‡∏¢‡∏£‡∏≤‡∏ä ‡∏ä‡∏ô‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏Å‡∏°‡∏•‡∏û‡∏£ ‡∏ß‡πà‡∏≠‡∏á‡πÑ‡∏ß‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏Å‡∏§‡∏ï‡∏¥‡∏¢‡∏≤‡∏û‡∏£ ‡∏Ñ‡∏≥‡∏®‡∏£‡∏µ‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏Å‡∏≠‡πÅ‡∏Å‡πâ‡∏ß ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏®‡∏π‡∏£‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏Å‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏±‡∏è‡∏ê‡πå ‡∏•‡∏≤‡∏†‡∏ó‡∏£‡∏á‡∏™‡∏∏‡∏Ç‡∏ô‡∏≤‡∏¢‡πÄ‡∏Å‡∏ï‡∏∏‡πÇ‡∏û‡∏ò‡∏¥‡πå ‡πÉ‡∏à‡∏™‡∏á‡∏Ü‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡πÅ‡∏Å‡πâ‡∏ß‡∏ö‡∏∏‡∏©‡∏£‡∏≤‡∏†‡∏£‡∏ì‡πå ‡πÄ‡∏•‡∏≤‡∏´‡∏Å‡∏±‡∏¢‡∏Å‡∏∏‡∏•‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏á‡∏≤‡∏°‡∏ß‡∏£‡∏¥‡∏ô‡∏ó‡∏£‡πå ‡∏Å‡∏¥‡∏ï‡∏ï‡∏¥‡∏à‡∏¥‡∏ï‡∏ï‡πå‡∏ô‡∏≤‡∏¢‡∏à‡∏¥‡∏£‡∏ß‡∏±‡∏í‡∏ô‡πå ‡∏£‡∏±‡∏Å‡∏©‡πå‡∏ß‡∏¥‡πÄ‡∏ä‡∏µ‡∏¢‡∏£‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ä‡∏ô‡∏±‡∏ç‡∏ò‡∏¥‡∏î‡∏≤ ‡∏ß‡∏µ‡∏£‡∏∞‡∏ß‡∏∏‡∏í‡∏¥‡∏û‡∏á‡∏®‡πå‡∏ô‡∏≤‡∏¢‡∏ä‡∏ô‡∏≤‡∏ò‡∏¥‡∏õ ‡∏ö‡∏∏‡∏ç‡∏°‡∏≤‡∏®‡∏¥‡∏£‡∏¥‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ä‡∏ß‡∏±‡∏•‡∏û‡∏±‡∏ä‡∏£ ‡∏ß‡∏¥‡∏ä‡∏±‡∏¢‡∏®‡∏¥‡∏£‡∏¥‡∏£‡∏±‡∏ï‡∏ô‡πå‡∏ô‡∏≤‡∏¢‡∏ä‡∏≤‡∏Ñ‡∏£‡∏¥‡∏© ‡∏ö‡∏ß‡∏£‡∏Å‡∏¥‡∏à‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ä‡∏≤‡∏•‡∏¥‡∏™‡∏≤ ‡∏û‡∏£‡∏™‡∏∏‡∏Ç‡∏à‡∏±‡∏ô‡∏ó‡∏£‡∏≤‡∏ô‡∏≤‡∏¢‡∏ç‡∏≤‡∏ì‡∏û‡∏±‡∏í‡∏ô‡πå ‡∏™‡∏∏‡∏Ç‡πÄ‡∏Å‡∏©‡∏°‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ê‡∏ì‡∏¥‡∏ä‡∏≤ ‡∏à‡∏£‡∏±‡∏™‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏£‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ê‡∏¥‡∏ï‡∏≤‡∏£‡∏µ‡∏¢‡πå‡∏õ‡∏≤‡∏ô‡∏™‡∏á‡πà‡∏≤‡∏ô‡∏≤‡∏¢‡∏ì‡∏û‡∏á‡∏®‡πå ‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏ô‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ì‡∏±‡∏è‡∏ê‡∏ì‡∏¥‡∏ä‡∏≤ ‡∏™‡∏∏‡∏î‡∏Ñ‡∏á‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ì‡∏±‡∏ê‡∏Å‡∏§‡∏ï‡∏≤ ‡∏®‡∏£‡∏µ‡∏ß‡∏¥‡πÄ‡∏ä‡∏µ‡∏¢‡∏£‡∏ô‡∏≤‡∏¢‡∏ì‡∏±‡∏ê‡∏ä‡∏ô‡∏ô‡∏ó‡πå ‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏ï‡∏≤‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ì‡∏±‡∏ê‡∏ì‡∏¥‡∏ä‡∏≤ ‡∏Ç‡∏ß‡∏≤‡∏•‡∏≥‡∏ò‡∏≤‡∏£‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ì‡∏±‡∏ê‡∏ò‡∏¥‡∏î‡∏≤ ‡∏≠‡∏£‡∏∏‡∏ì‡πÅ‡∏™‡∏á‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ï‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡∏ã‡∏≤‡∏ß‡∏≤‡∏ï‡∏µ ‡∏≠‡∏±‡∏•‡∏≠‡∏≤‡∏ï‡∏±‡∏™‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ò‡∏±‡∏ç‡∏£‡∏î‡∏≤ ‡πÇ‡∏ó‡∏ò‡∏£‡∏±‡∏ï‡∏ô‡πå‡∏ô‡∏≤‡∏¢‡∏ò‡∏¥‡∏ï‡∏¥‡∏ß‡∏∏‡∏í‡∏¥ ‡πÄ‡∏û‡∏ä‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏á‡∏ô‡∏≤‡∏¢‡∏ò‡∏µ‡∏£‡πÄ‡∏°‡∏ò ‡πÅ‡∏™‡∏á‡∏≠‡∏£‡∏∏‡∏ì‡∏ô‡∏≤‡∏¢‡∏ô‡∏û‡πÄ‡∏Å‡πâ‡∏≤ ‡∏ß‡∏¥‡∏ß‡∏±‡∏í‡∏ä‡∏¢‡∏≤‡∏á‡∏Å‡∏π‡∏•‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ô‡∏†‡∏±‡∏™‡∏ß‡∏£‡∏£‡∏ì ‡πÅ‡∏ú‡∏•‡∏á‡∏®‡∏£‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ô‡∏±‡∏ä‡∏ä‡∏≤ ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏ß‡∏á‡∏®‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ô‡∏±‡∏ã‡∏£‡∏µ‡∏¢‡∏≤ ‡∏ö‡∏∏‡∏ç‡∏ä‡∏π‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ô‡∏±‡∏ô‡∏ï‡∏£‡∏≤ ‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡πå‡∏ô‡πâ‡∏≠‡∏¢‡∏ô‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏ß‡∏¥‡∏ä‡∏ç‡πå ‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏ß‡∏¥‡πÑ‡∏•‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏õ‡∏£‡∏≤‡∏á‡∏Ñ‡πå‡∏ó‡∏¥‡∏û‡∏¢‡πå ‡∏ö‡∏∏‡∏ç‡∏°‡∏µ‡∏ß‡∏¥‡πÄ‡∏®‡∏©‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏õ‡∏£‡∏≤‡∏ì‡∏õ‡∏£‡∏¥‡∏¢‡∏≤ ‡∏à‡πà‡∏≤‡∏û‡∏•‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏õ‡∏≤‡∏ì‡∏¥‡∏™‡∏£‡∏≤ ‡∏®‡∏£‡∏µ‡∏≠‡∏≤‡∏à‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏û‡∏£‡∏õ‡∏ß‡∏µ‡∏ì‡πå ‡∏ö‡∏∏‡∏ç‡∏ô‡∏≥‡∏ô‡∏≤‡∏¢‡∏û‡∏¥‡∏ò‡∏¥‡∏ô‡∏±‡∏ô‡∏ó‡πå ‡∏™‡∏±‡∏ï‡∏ï‡∏¥‡∏¢‡∏≤‡∏£‡∏±‡∏Å‡∏©‡πå‡∏ô‡∏≤‡∏¢‡∏û‡∏∏‡∏í‡∏¥‡∏û‡∏á‡∏®‡πå ‡∏ú‡∏î‡∏∏‡∏á‡∏ß‡∏±‡∏í‡∏ô‡∏∞‡πÇ‡∏ä‡∏Ñ‡∏ô‡∏≤‡∏¢‡∏†‡∏π‡∏°‡∏¥‡∏£‡∏û‡∏µ ‡∏ö‡∏π‡∏£‡∏ì‡∏∞‡∏™‡∏°‡∏ó‡∏ö‡∏ô‡∏≤‡∏¢‡∏†‡∏π‡∏ß‡πÄ‡∏î‡∏ä ‡∏ô‡∏¥‡∏•‡∏Ñ‡∏ï‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏°‡∏ô‡∏ì‡∏¥‡∏ä‡∏ä‡∏≤ ‡∏ö‡∏∏‡∏ç‡∏ô‡∏≥‡∏ô‡∏≤‡∏¢‡∏£‡∏±‡∏ä‡∏ä‡∏≤‡∏ô‡∏ô‡∏ó‡πå ‡∏Ç‡∏°‡∏¥‡πâ‡∏ô‡∏ó‡∏≠‡∏á‡∏ô‡∏≤‡∏¢‡∏ß‡∏ä‡∏¥‡∏£‡∏ß‡∏¥‡∏ó‡∏¢‡πå ‡∏ä‡∏≥‡∏ô‡∏≤‡∏ç‡∏ß‡∏á‡∏®‡πå‡∏ô‡∏≤‡∏¢‡∏ß‡∏®‡∏¥‡∏ô ‡πÄ‡∏≠‡∏µ‡πà‡∏¢‡∏°‡∏ï‡πà‡∏≠‡∏°‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏®‡∏∏‡∏†‡∏¥‡∏™‡∏£‡∏≤ ‡∏™‡∏∏‡∏ß‡∏£‡∏£‡∏ì‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå‡∏™‡∏¥‡∏ô‡∏ô‡∏≤‡∏¢‡∏™‡∏∏‡∏£‡∏û‡∏á‡∏©‡πå ‡∏à‡∏±‡∏ô‡∏ó‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏´‡∏ó‡∏±‡∏¢‡∏ô‡∏±‡∏ô‡∏ó‡πå ‡πÄ‡∏ó‡∏û‡∏Å‡∏≥‡∏õ‡∏ô‡∏≤‡∏ó‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏≠‡∏ä‡∏¥‡∏£‡∏ç‡∏≤‡∏ì‡πå ‡∏•‡∏≥‡∏û‡∏£‡∏´‡∏°‡πÅ‡∏Å‡πâ‡∏ß‡∏ô‡∏≤‡∏¢‡∏≠‡∏±‡∏Ñ‡∏£‡∏ß‡∏¥‡∏ó‡∏¢‡πå ‡∏ô‡∏¥‡∏ò‡∏¥‡∏ö‡∏∏‡∏ç‡∏ç‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡πÑ‡∏≠‡∏•‡∏î‡∏≤ ‡∏ó‡∏≤‡∏´‡∏∞‡∏û‡∏£‡∏´‡∏°‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡πÅ‡∏û‡∏£‡∏ó‡∏≠‡∏á ‡πÄ‡∏û‡∏≠‡∏£‡∏±‡∏ï‡∏ô‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏≠‡∏†‡∏¥‡∏™‡∏£‡∏≤ ‡∏ô‡∏∏‡∏ï‡∏†‡∏π‡∏ï‡∏¥‡∏û‡∏á‡∏®‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏Å‡∏ß‡∏¥‡∏ô‡∏ò‡∏£ ‡πÄ‡∏°‡∏Ü‡∏∞‡∏à‡∏≥‡∏£‡∏π‡∏ç‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏Å‡∏≤‡∏ô‡∏ï‡∏¥‡∏°‡∏≤ ‡∏°‡∏±‡∏ó‡∏Å‡∏¥‡∏à‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏à‡∏≤‡∏£‡∏¥‡∏ç‡∏î‡∏≤ ‡∏≠‡∏¥‡∏ô‡∏≠‡∏±‡∏ç‡∏ä‡∏±‡∏ç‡∏ô‡∏≤‡∏¢‡πÇ‡∏ä‡∏Ñ‡∏ä‡∏±‡∏¢ ‡∏≠‡∏£‡∏¥‡∏¢‡∏∞‡∏ö‡∏∏‡∏ç‡∏™‡∏Å‡∏∏‡∏•‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ì‡∏†‡∏±‡∏ó‡∏£ ‡∏î‡∏≥‡πÅ‡∏Å‡πâ‡∏ß‡∏ô‡∏≤‡∏¢‡∏ì‡∏±‡∏ê‡∏î‡∏ô‡∏¢‡πå ‡∏≠‡∏†‡∏¥‡∏£‡∏ï‡∏¥‡∏ä‡∏±‡∏¢‡∏®‡∏¥‡∏£‡∏¥‡∏Å‡∏∏‡∏•‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ó‡∏±‡∏®‡∏ô‡πå‡∏™‡∏∏‡∏î‡∏≤ ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ß‡∏¥‡πÄ‡∏®‡∏©‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ò‡∏µ‡∏£‡∏¥‡∏®‡∏£‡∏≤ ‡∏≠‡∏¥‡∏ô‡∏ï‡∏£‡∏≤‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ô‡∏£‡∏°‡∏• ‡∏û‡∏£‡∏´‡∏°‡πÇ‡∏ä‡∏ï‡∏¥‡∏ô‡∏≤‡∏¢‡∏õ‡∏¥‡∏ï‡∏¥‡∏û‡∏±‡∏ï‡∏ô‡πå ‡∏£‡∏±‡∏ï‡∏ô‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡πÄ‡∏õ‡∏°‡∏¥‡∏Å‡∏≤ ‡∏ö‡∏∏‡∏£‡∏ì‡∏®‡∏¥‡∏£‡∏¥‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏û‡∏£‡∏†‡∏£‡∏ì‡πå ‡∏ö‡∏∏‡∏ç‡∏¢‡∏π‡πà‡∏Æ‡∏á‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏†‡∏≤‡∏ô‡∏¥‡∏•‡∏ô‡∏≤‡∏ñ ‡∏°‡∏≤‡∏ô‡∏∞‡∏ò‡∏±‡∏ç‡∏ç‡∏≤‡∏ô‡∏≤‡∏¢‡∏†‡∏≤‡∏™‡∏Å‡∏£ ‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏°‡∏®‡∏≤‡∏£‡∏±‡∏®‡∏°‡πå ‡∏û‡∏∏‡∏ó‡∏ò‡∏∞‡πÑ‡∏ä‡∏¢‡∏ó‡∏±‡∏®‡∏ô‡πå‡∏ô‡∏≤‡∏¢‡∏£‡∏±‡∏ê‡∏ò‡∏µ‡∏£‡πå ‡∏û‡∏ô‡∏¥‡∏ï‡∏à‡∏¥‡∏ô‡∏î‡∏≤‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ß‡∏¥‡∏£‡∏±‡∏•‡∏û‡∏±‡∏ä‡∏£ ‡∏Ñ‡∏∏‡∏ì‡∏≤‡∏™‡∏ñ‡∏¥‡∏ï‡∏¢‡πå‡∏ä‡∏±‡∏¢‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏®‡∏®‡∏¥‡∏ô‡∏¥‡∏†‡∏≤ ‡πÅ‡∏Å‡πâ‡∏ß‡∏™‡∏∏‡∏ß‡∏£‡∏£‡∏ì‡πå‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏™‡∏∏‡∏ä‡∏±‡∏ç‡∏ç‡∏≤ ‡∏´‡∏ô‡∏π‡∏¢‡∏¥‡πâ‡∏°‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏™‡∏∏‡∏†‡∏±‡∏™‡∏™‡∏£‡∏≤ ‡∏§‡∏Å‡∏©‡πå‡∏£‡∏±‡∏ï‡∏ô‡∏µ‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏™‡∏∏‡∏°‡∏≤‡∏•‡∏µ ‡∏ô‡∏¥‡∏°‡∏¥‡∏ï‡∏£‡∏°‡∏á‡∏Ñ‡∏•‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡πÅ‡∏™‡∏á‡∏ï‡∏∞‡∏ß‡∏±‡∏ô ‡∏ö‡∏∏‡∏©‡∏õ‡∏ß‡∏ô‡∏¥‡∏ä";
const DRUGS=[{n:"Paracetamol",a:"Analgesic / Antipyretic"},{n:"Amoxicillin",a:"Antibiotic (Penicillin)"},{n:"Cetirizine",a:"Antihistamine Gen 2"},{n:"Omeprazole",a:"PPI"},{n:"Simvastatin",a:"Statin"},{n:"Metformin",a:"Biguanide"},{n:"Amlodipine",a:"CCB"},{n:"Ibuprofen",a:"NSAIDs"},{n:"Prednisolone",a:"Corticosteroid"},{n:"Salbutamol",a:"Œ≤2-agonist"},{n:"Losartan",a:"ARB"},{n:"Atorvastatin",a:"Statin"},{n:"Clopidogrel",a:"Antiplatelet"},{n:"Gabapentin",a:"Anticonvulsant"},{n:"Domperidone",a:"Antiemetic"},{n:"Lorazepam",a:"Benzodiazepine"},{n:"Tramadol",a:"Opioid Analgesic"},{n:"Acetylcysteine",a:"Mucolytic"},{n:"Mefenamic Acid",a:"NSAIDs"},{n:"Enalapril",a:"ACE Inhibitor"},{n:"Propranolol",a:"Beta-blocker"},{n:"Furosemide",a:"Loop Diuretic"},{n:"Warfarin",a:"Anticoagulant"},{n:"Digoxin",a:"Cardiac Glycoside"},{n:"Azithromycin",a:"Macrolide"},{n:"Ciprofloxacin",a:"Fluoroquinolone"},{n:"Doxycycline",a:"Tetracycline"},{n:"Ceftriaxone",a:"Cephalosporin Gen 3"},{n:"Diazepam",a:"Benzodiazepine"},{n:"Fluoxetine",a:"SSRI"},{n:"Amitriptyline",a:"TCA"},{n:"Phenytoin",a:"Anticonvulsant"},{n:"CPM",a:"Antihistamine Gen 1"},{n:"Loratadine",a:"Antihistamine Gen 2"},{n:"Fexofenadine",a:"Antihistamine Gen 3"},{n:"Dextromethorphan",a:"Antitussive"},{n:"Bromhexine",a:"Mucolytic"},{n:"Famotidine",a:"H2 Blocker"},{n:"Hyoscine",a:"Antispasmodic"},{n:"Loperamide",a:"Antidiarrheal"},{n:"Glibenclamide",a:"Sulfonylurea"},{n:"Allopurinol",a:"Xanthine oxidase inhibitor"},{n:"Colchicine",a:"Antigout"},{n:"Diclofenac",a:"NSAIDs"},{n:"Naproxen",a:"NSAIDs"},{n:"Celecoxib",a:"COX-2 Inhibitor"},{n:"Aspirin",a:"Antiplatelet / NSAIDs"},{n:"Ergotamine",a:"Antimigraine"},{n:"Norfloxacin",a:"Antibiotic (UTI)"},{n:"ORS",a:"Electrolyte solution"}];

function initStudents() {
    const names=RN.split(/(?=‡∏ô‡∏≤‡∏¢|‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß)/).filter(n=>n.trim()).map(n=>n.replace(/^‡∏ô‡∏≤‡∏¢|^‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß/,'').trim());
    const sci=R_SCI.map(s=>{const[nick,rest]=s.split(' (');return{nickname:nick,id:rest.replace(')',''),track:'sci'};});
    const care=R_CARE.map(s=>{const[nick,rest]=s.split(' (');return{nickname:nick,id:rest.replace(')',''),track:'care'};});
    const all=[...sci,...care].sort((a,b)=>a.id.localeCompare(b.id));
    all.forEach((s,i)=>{s.realName=names[i]||'‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';});
    window.__students=all;
}

let curDrug=null;
window.nextDrug=()=>{
    curDrug=DRUGS[Math.floor(Math.random()*DRUGS.length)];
    const f=document.getElementById('fc-front'),b=document.getElementById('fc-back'),h=document.getElementById('fc-hint');
    if(f){f.textContent=curDrug.n;b.style.display='none';b.textContent=curDrug.a;if(h){h.style.display='block';h.textContent='‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏â‡∏•‡∏¢';}}
};
window.flipCard=()=>{
    const b=document.getElementById('fc-back'),h=document.getElementById('fc-hint');
    if(b){b.style.display='block';if(h)h.style.display='none';}
};

window.toast=(msg,type='info')=>{
    const t=document.getElementById('toast');
    t.textContent=msg;t.className='show '+type;
    clearTimeout(t._t);t._t=setTimeout(()=>t.classList.remove('show'),3000);
};

initStudents();
window.__tab='home';
</script>
</body>
</html>
